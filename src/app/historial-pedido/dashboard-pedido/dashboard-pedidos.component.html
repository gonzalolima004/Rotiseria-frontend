<div class="modal-overlay" (click)="cerrarModal()">
  <div class="modal-dashboard" (click)="$event.stopPropagation()">
    
    <!-- HEADER -->
    <div class="modal-header">
      <h2>ğŸ“Š Resumen de Pedidos</h2>
      <button class="btn-cerrar" (click)="cerrarModal()">âœ•</button>
    </div>

    <!-- BODY -->
    <div class="modal-body">
      
      <!-- FILTROS POR FECHA -->
      <div class="seccion-filtros">
        <h3>ğŸ” Filtrar por Fecha</h3>
        <div class="filtros-grid">
          <div class="input-group">
            <label for="fechaDesde">Desde:</label>
            <input 
              type="date" 
              id="fechaDesde"
              [value]="fechaDesde()"
              (input)="fechaDesde.set($any($event.target).value)">
          </div>

          <div class="input-group">
            <label for="fechaHasta">Hasta:</label>
            <input 
              type="date" 
              id="fechaHasta"
              [value]="fechaHasta()"
              (input)="fechaHasta.set($any($event.target).value)">
          </div>
        </div>

        <div class="botones-filtros">
          <button class="btn-aplicar" (click)="aplicarFiltro()">
            âœ” Aplicar Filtro
          </button>
          <button 
            class="btn-limpiar" 
            (click)="limpiarFiltros()"
            *ngIf="fechaDesde() || fechaHasta()">
            ğŸ”„ Limpiar
          </button>
        </div>

        <!-- Indicador de filtros activos -->
        <div class="filtros-activos" *ngIf="fechaDesde() || fechaHasta()">
          <p><strong>Filtros aplicados:</strong></p>
          <p *ngIf="fechaDesde()">Desde: <strong>{{ fechaDesde() }}</strong></p>
          <p *ngIf="fechaHasta()">Hasta: <strong>{{ fechaHasta() }}</strong></p>
        </div>
      </div>

      <!-- ESTADÃSTICAS -->
      <div class="seccion-estadisticas">
        <h3>ğŸ“ˆ EstadÃ­sticas</h3>
        
        <div class="stats-grid">
          <!-- Total Pedidos -->
          <div class="stat-card">
            <div class="stat-icono">ğŸ“¦</div>
            <div class="stat-info">
              <p class="stat-label">Total Pedidos</p>
              <p class="stat-valor">{{ estadisticas().totalPedidos }}</p>
            </div>
          </div>

          <!-- Monto Total -->
          <div class="stat-card">
            <div class="stat-icono">ğŸ’°</div>
            <div class="stat-info">
              <p class="stat-label">Monto Total</p>
              <p class="stat-valor">{{ estadisticas().montoTotal | currency:'ARS':'symbol-narrow':'1.0-0' }}</p>
            </div>
          </div>

          <!-- Promedio por Pedido -->
          <div class="stat-card">
            <div class="stat-icono">ğŸ“Š</div>
            <div class="stat-info">
              <p class="stat-label">Promedio por Pedido</p>
              <p class="stat-valor">{{ estadisticas().promedioVenta | currency:'ARS':'symbol-narrow':'1.0-0' }}</p>
            </div>
          </div>
        </div>
      </div>

      <!-- PEDIDOS POR ESTADO -->
      <div class="seccion-estados">
        <h3>ğŸ“‹ Pedidos por Estado</h3>
        
        <div class="estados-lista">
          <div 
            *ngFor="let estado of Object.keys(estadisticas().porEstado)" 
            class="estado-item">
            <span [class]="'badge-estado ' + getEstadoClase(estado)">
              {{ estado }}
              </span>
            <span class="estado-cantidad">
              {{ estadisticas().porEstado[estado] }} pedido(s)
            </span>
          </div>

          <div *ngIf="Object.keys(estadisticas().porEstado).length === 0" class="sin-datos-estados">
            No hay pedidos para mostrar
          </div>
        </div>
      </div>

    </div>

    <!-- FOOTER -->
    <div class="modal-footer">
      <button class="btn-cerrar-footer" (click)="cerrarModal()">
        Cerrar 
      </button>
    </div>

  </div>
</div>